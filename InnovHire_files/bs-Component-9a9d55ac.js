define("@widget/MESSAGING/bs-Component-9a9d55ac.js",["exports","@wsb/guac-widget-shared/lib/components/Form","@wsb/guac-widget-shared/lib/components/Recaptcha/badge","@wsb/guac-widget-shared/lib/common/constants/form/formIdentifiers","@wsb/guac-widget-shared/lib/common/constants/traffic2"],(function(e,o,a,t,r){"use strict";function l(e){return e&&e.__esModule?e.default:e}var c=l(o),i=l(a),s=l(t),g=l(r);function n(){return(n=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e}).apply(this,arguments)}var p=(global.keyMirror||guac.keymirror)({MESSAGING_FAB:null,MESSAGING_MESSAGE_FLYOUT:null,WELCOME_MESSAGE:null,SEND_MESSAGE_TO:null,EMAIL_OPT_IN_TOGGLE:null,EMAIL_OPT_IN_MESSAGE:null});function u({text:e}){return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{category:"neutral",section:"overlay",style:{backgroundColor:"neutral",margin:"-medium medium medium medium",borderRadius:"5px",position:"relative"}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,{style:{padding:"12px 15px",borderRadius:"5px",backgroundColor:"primaryOverlay",fontSize:"16px",color:"neutral"}},e),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Element,{tag:"svg",width:"33px",height:"16px",viewBox:"0 0 33 16",style:{fill:"primaryOverlay",position:"absolute",top:"100%",left:"3px",marginTop:"-1px"},xmlns:"http://www.w3.org/2000/svg"},(global.React||guac.react).createElement("path",{d:"M0.342304 14.5C7.35025 6.3293 3.35025 0.829295 0 0.0.0 0.0 5.4 2.1 32.3502 0.329295C32.3503 3.8293 -3.13481 20.7261 0.342304 14.5Z"})))}function d({title:e,message:o,children:a,onClose:t}){return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-aid":p.MESSAGING_MESSAGE_FLYOUT,style:{"-webkit-overflow-scrolling":"touch",overflowX:"hidden",overflowY:"auto",boxShadow:"0px 3px 18px rgba(0, 0, 0, 0.25)",backgroundColor:"neutral",borderRadius:"5px",borderWidth:"xsmall",borderStyle:"solid",borderColor:"#fff",width:"382px",marginBottom:"small",position:"absolute",maxHeight:"calc(100vh - 105px)",right:"-1px",bottom:"100%","@xs-only":{maxHeight:"100vh",height:"100vh",zIndex:"inherit",position:"fixed",left:"0",top:"0",bottom:"89px",width:"100%"}}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-field-id":"formEmail"},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Icon,{onClick:t,icon:"close",size:22,style:{color:"#fff",position:"absolute",top:"18px",right:"14px",cursor:"pointer","@sm":{display:"none"}}}),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading,{style:{color:"action",fontSize:"large",backgroundColor:"action",paddingTop:"small",paddingBottom:o?"xlarge":"small",paddingLeft:"medium",paddingRight:"medium",margin:o?"0":"0 0 medium 0",textAlign:"left","@md":{textAlign:"left"}}},e),o?(global.React||guac.react).createElement(u,{text:o}):null,(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:{overflow:"hidden",padding:"0 medium"}},a)))}u.propTypes={text:(global.PropTypes||guac["prop-types"]).string.required},d.propTypes={title:(global.PropTypes||guac["prop-types"]).string.required,message:(global.PropTypes||guac["prop-types"]).string.required,children:(global.PropTypes||guac["prop-types"]).node.required,onClose:(global.PropTypes||guac["prop-types"]).func.required};const b="EMAIL",m={contactApi:/[?&]contactApiVersion=([^&]*)/};function y(e="contactApi"){if("undefined"==typeof window)return"";const{location:{search:o=""}}=window||{},a=m[e].exec(o);return a&&a[1]?a[1]+".":""}const f=["locale","websiteId","accountId","domainName","staticContent","emailConfirmationMessage","recaptchaType","emailOptInHidden","emailOptInEnabled","emailOptInMessage","formSuccessMessage","notificationPreference","isReseller"],{utils:{TCCLUtils:w}}=(global.Core||guac["@wsb/guac-widget-core"]).UX2,{MESSAGING_EMAIL:E,MESSAGING_CONVERSATIONS:h}=s,x=({keyName:e})=>"phone"!==e,S=g.editor_preview.messaging_fab_close,T=g.editor_preview.messaging_fab_open,{Z_INDEX_COOKIE_BANNER:C,Z_INDEX_FULL_SCREEN_OVERLAY:I}=(global.Core||guac["@wsb/guac-widget-core"]).constants.layers;function P(e,o){const{section:a,isMobile:t,forceShowFlyout:r,businessName:l,welcomeMessage:s,id:g,config:u,recaptchaType:m,formEmail:P,formSuccessMessage:R,emailOptInEnabled:M,emailOptInMessage:_,formFields:A,notificationPreference:O}=e,G=(global.React||guac.react).useRef(!1),[N,v]=(global.React||guac.react).useState(r),k=()=>v(!N),U=O===b?A.filter(x):A,X=O===b?E:h;(global.React||guac.react).useEffect((()=>{N!==r&&v(r)}),[r]);const L=[P,s,R,M,_];return(global.React||guac.react).useEffect((()=>{G.current?v(!0):G.current=!0}),L),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{category:"neutral",section:a,style:{position:"fixed",right:"medium",bottom:"medium",zIndex:N?I:C-1,width:"65px",height:"65px","@md":{zIndex:N?10001:C-1}}},N?(global.React||guac.react).createElement(d,{title:l,message:s,onClose:k},(global.React||guac.react).createElement(c,n({},(global._||guac.lodash).pick(e,f),u,{formSubmitHost:u.formSubmitHost.replace("{{SHA}}",y()),formFields:U,formIdentifier:X,category:"neutral",pageId:"00000000-0000-0000-0000-000000000000",widgetId:g,renderMode:o.renderMode,recaptchaEnabled:Boolean(m),dataAidPrefix:"MESSAGING"}))):(global.React||guac.react).createElement(i,null),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-aid":p.MESSAGING_FAB,"data-field-id":t||r?null:"enabled","data-edit-interactive":"true",onClick:k,"data-traffic2":N?S:T,"data-tccl":w.getTCCLString({eid:N?"ux2.messaging.fab.close":"ux2.messaging.fab.open",type:"click"}),style:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:N?"#555":"action",boxShadow:"0px 3px 18px rgba(0, 0, 0, 0.25)",transform:"translateZ(0)"}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Icon,{style:{color:N?"#fff":"action"},icon:N?"close":"chat",size:N?34:44})))}P.propTypes={forceShowFlyout:(global.PropTypes||guac["prop-types"]).bool,businessName:(global.PropTypes||guac["prop-types"]).string,formEmail:(global.PropTypes||guac["prop-types"]).string,welcomeMessage:(global.PropTypes||guac["prop-types"]).string,formSuccessMessage:(global.PropTypes||guac["prop-types"]).string,emailOptInMessage:(global.PropTypes||guac["prop-types"]).string,emailOptInEnabled:(global.PropTypes||guac["prop-types"]).bool,section:(global.PropTypes||guac["prop-types"]).string,domainName:(global.PropTypes||guac["prop-types"]).string,config:(global.PropTypes||guac["prop-types"]).shape({formSubmitEndpoint:(global.PropTypes||guac["prop-types"]).string,formSubmitHost:(global.PropTypes||guac["prop-types"]).string}),formFields:(global.PropTypes||guac["prop-types"]).array,accountId:(global.PropTypes||guac["prop-types"]).string.isRequired,websiteId:(global.PropTypes||guac["prop-types"]).string.isRequired,id:(global.PropTypes||guac["prop-types"]).string,staticContent:(global.PropTypes||guac["prop-types"]).object.isRequired,locale:(global.PropTypes||guac["prop-types"]).string,emailConfirmationMessage:(global.PropTypes||guac["prop-types"]).string,recaptchaType:(global.PropTypes||guac["prop-types"]).string,emailOptInHidden:(global.PropTypes||guac["prop-types"]).bool,isMobile:(global.PropTypes||guac["prop-types"]).bool,notificationPreference:(global.PropTypes||guac["prop-types"]).string,isReseller:(global.PropTypes||guac["prop-types"]).bool.readOnly},e.default=P})),"undefined"!=typeof window&&(window.global=window);
