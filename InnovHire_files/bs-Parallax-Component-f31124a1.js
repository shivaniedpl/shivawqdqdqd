define("@widget/LAYOUT/bs-Parallax-Component-f31124a1.js",["exports","@widget/LAYOUT/c/bs-eventListenerPolyfill"],(function(e,t){"use strict";class i extends(global.React||guac.react).Component{constructor(e){super(e),this.handleScroll=this.handleScroll.bind(this),this.init=this.init.bind(this),this.reset=this.reset.bind(this),this.reInit=this.reInit.bind(this),this.handleMatchMedia=this.handleMatchMedia.bind(this),this._deviceSize=function(e=""){return/mobile/i.test(e)?"xs":/tablet/i.test(e)?"md":"lg"}(e.viewDevice)}handleMatchMedia(e){this._deviceSize!==e.size&&(this._deviceSize=e.size,this.reInit())}componentDidMount(){t.eventListenerPolyfill(),window.requestAnimationFrame&&window.requestAnimationFrame(this.init)}componentDidUpdate({renderMode:e}){e!==this.props.renderMode&&this.reInit()}componentWillUnmount(){this.reset()}reInit(){this.reset(),window.requestAnimationFrame&&window.requestAnimationFrame(()=>{this.init()})}init(){const{hamburgerId:e,uniqueId:t,renderMode:i,excludedBreakpoints:n=[]}=this.props;if(("PUBLISH"===i||"PREVIEW"===i)&&-1===n.indexOf(this._deviceSize)){if(this.parallaxElement=document.getElementById(t),this.hamburgerDropdown=document.getElementById(e),this.viewport=this.getElementContainer(".widget-header",this.parallaxElement,document.body),this.scrollParent=this.getElementContainer(".viewport, #render-container, .scaler-content",this.parallaxElement,window),this.scrollParent.addEventListener("scroll",this.handleScroll,{passive:!0}),this.scrollParent.addEventListener("resize",this.reInit,{passive:!0}),this.calcScrollParent=this.scrollParent===window?document.body:this.scrollParent,this.parallaxElement&&this.scrollParent&&this.calcScrollParent){const e=this.scrollParent===window?window.innerHeight:this.calcScrollParent.getBoundingClientRect().bottom;this.isInitOversize=e<this.parallaxElement.getBoundingClientRect().bottom}this.handleScroll()}}reset(){this&&this.scrollParent&&(this.scrollParent.removeEventListener("scroll",this.handleScroll,{passive:!0}),this.scrollParent.removeEventListener("resize",this.reInit,{passive:!0}))}getElementContainer(e,t,i){return Array.from(document.querySelectorAll(e)).find(e=>e.contains(t))||i}handleScroll(){const{parallaxElement:e,calcScrollParent:t,hamburgerDropdown:i,isInitOversize:n}=this,{speed:r,isBackground:o,oversizeSpeed:s=Math.abs(r),noTransform:a,renderMode:l}=this.props;if(!e)return;if("PUBLISH"!==l&&"PREVIEW"!==l)return;if(i&&0!==i.offsetHeight)return;const{top:d,height:c}=t.getBoundingClientRect(),p=this.viewport.getBoundingClientRect(),h=this.scrollParent===window?0:d,g=p.top-h,u=p.bottom-h,m=p.height,b=g>=0,w=u<0,y=b||w,P=this.oobTop||this.oobBottom;if(y&&P)return;this.oobTop=b,this.oobBottom=w;const v=o||!n?r:s,f=(y?0:g)*(1-1/Math.max(Math.abs(v),.1))*(v<0?-1:1);if(a?(e.style.position="relative",e.style.top=f.toFixed(2)+"px"):e.style.transform=f?`translate3d(0, ${f.toFixed(2)}px, 0)`:"none",!o){const t=Math.min(c,m),i=2,n=y?1:Math.max(Math.min(u/t*i,1),0);e.style.opacity=n.toFixed(2)}}render(){const{excludedBreakpoints:e=[],renderMode:t}=this.props;return e.length&&t===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.PUBLISH?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX.MatchMedia,{onChange:this.handleMatchMedia}):null}}i.propTypes={uniqueId:(global.PropTypes||guac["prop-types"]).string.isRequired,speed:(global.PropTypes||guac["prop-types"]).number,oversizeSpeed:(global.PropTypes||guac["prop-types"]).number,isBackground:(global.PropTypes||guac["prop-types"]).bool,hamburgerId:(global.PropTypes||guac["prop-types"]).string,noTransform:(global.PropTypes||guac["prop-types"]).bool,renderMode:(global.PropTypes||guac["prop-types"]).string,viewDevice:(global.PropTypes||guac["prop-types"]).string,excludedBreakpoints:(global.PropTypes||guac["prop-types"]).arrayOf((global.PropTypes||guac["prop-types"]).string)},i.defaultProps={speed:-1,isBackground:!0},e.default=i})),"undefined"!=typeof window&&(window.global=window);
